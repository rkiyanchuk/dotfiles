# Read `man 5 sway` for a complete reference.


### Variables ###

  set $mod Mod4

  set $lock loginctl lock-session
  set $appmenu ulauncher-toggle
  set $term alacritty


### Settings ###

  floating_modifier $mod
  hide_edge_borders smart
  seat seat0 hide_cursor 5000

  set $laptop eDP-1
  bindswitch --reload --locked lid:on output $laptop disable
  bindswitch --reload --locked lid:off output $laptop enable

  for_window [app_id="ulauncher"] floating enable, border none


### Keybindings ###

  bindsym --to-code {
    # general
    $mod+Space exec $appmenu
    $mod+Return exec $term
    $mod+Escape exec $lock
    $mod+Shift+c kill
    $mod+equal layout toggle split
    $mod+minus splitv
    $mod+backslash splith
    $mod+f fullscreen
    $mod+t floating toggle
    $mod+Shift+t focus mode_toggle

    # sway
    $mod+Shift+q exec swaynag -t warning -m "Do you really want to exit Sway?" \
      -b "Yes!" "swaymsg exit" \
      -s "No"

    $mod+Shift+r exec swaymsg reload

    # containers
    $mod+j exec swaymsg [con_id=$(swaymsg -t get_tree | ~/.config/sway/alttab t)] focus
    $mod+k exec swaymsg [con_id=$(swaymsg -t get_tree | ~/.config/sway/alttab f)] focus

    $mod+Shift+h move left
    $mod+Shift+j move down
    $mod+Shift+k move up
    $mod+Shift+l move right

    # workspaces
    $mod+1 workspace 1
    $mod+2 workspace 2
    $mod+3 workspace 3
    $mod+4 workspace 4
    $mod+5 workspace 5

    $mod+Ctrl+h move container to output left
    $mod+Ctrl+j move container to output down
    $mod+Ctrl+k move container to output up
    $mod+Ctrl+l move container to output right

    $mod+Shift+1 move container to workspace 1
    $mod+Shift+2 move container to workspace 2
    $mod+Shift+3 move container to workspace 3
    $mod+Shift+4 move container to workspace 4
    $mod+Shift+5 move container to workspace 5

    $mod+r mode "resize"
  }

  mode "resize" {
    bindsym --to-code {
      h resize grow width 10 px or 10 ppt
      l resize shrink width 10 px or 10 ppt
      k resize shrink height 10 px or 10 ppt
      j resize grow height 10 px or 10 ppt

      Return mode "default"
      Escape mode "default"
    }
  }

  # multimedia
  bindsym --locked XF86AudioRaiseVolume exec pamixer -i 5
  bindsym --locked XF86AudioLowerVolume exec pamixer -d 5
  bindsym --locked XF86AudioMute exec pamixer -t
  bindsym --locked XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle
  bindsym --locked XF86MonBrightnessDown exec brightnessctl set 5%-
  bindsym --locked XF86MonBrightnessUp exec brightnessctl set +5%
  bindsym --locked XF86AudioPlay exec playerctl play-pause
  bindsym --locked XF86AudioNext exec playerctl next
  bindsym --locked XF86AudioPrev exec playerctl previous

  # screenshot
  bindsym --release Print exec grimshot save screen
  bindsym --release Ctrl+Print exec grimshot save area
  bindsym --release Alt+Print exec grimshot save win
  bindsym --release Shift+Print exec grimshot copy screen
  bindsym --release Shift+Ctrl+Print exec grimshot copy area
  bindsym --release Shift+Alt+Print exec grimshot copy win


### Input ###

  input type:keyboard {
    xkb_layout us,ua,ru
    xkb_options grp:caps_toggle
  }

  input type:touchpad {
    dwt enabled  # disable a touchpad while typing.
    tap enabled
    natural_scroll enabled
  }
  input type:pointer {
    natural_scroll enabled
  }


### Appearance ###

  # Wallpaper
  output * bg #181c24 solid_color

  ## Base16 OneDark
  # Author: Lalit Magant (http://github.com/tilal6991)

  set $base00 #282c34
  set $base01 #353b45
  set $base02 #3e4451
  set $base03 #545862
  set $base04 #565c64
  set $base05 #abb2bf
  set $base06 #b6bdca
  set $base07 #c8ccd4
  set $base08 #e06c75
  set $base09 #d19a66
  set $base0A #e5c07b
  set $base0B #98c379
  set $base0C #56b6c2
  set $base0D #61afef
  set $base0E #c678dd
  set $base0F #be5046

  # Property Name         Border  BG      Text    Indicator Child Border
  client.focused          $base05 $base0D $base00 $base0D $base0D
  client.focused_inactive $base01 $base01 $base05 $base03 $base01
  client.unfocused        $base01 $base00 $base05 $base01 $base01
  client.urgent           $base08 $base08 $base00 $base08 $base08
  client.placeholder      $base00 $base00 $base05 $base00 $base00
  client.background       $base07

  font pango:Dejavu Sans 16
  gaps inner 0
  gaps outer 0
  default_border pixel 1
  default_floating_border pixel 1
  titlebar_border_thickness 1
  titlebar_padding 1

# GTK Configuration
# Enforce dconf theme settings.
# For details see https://github.com/swaywm/sway/wiki/GTK-3-settings-on-Wayland
set $gnome-schema org.gnome.desktop.interface
exec_always {
    gsettings set $gnome-schema gtk-theme "Breeze"
    gsettings set $gnome-schema icon-theme "breeze"
    gsettings set $gnome-schema cursor-theme "Breeze_Snow"
    gsettings set $gnome-schema font-name "Dejavu Sans 14"
}

bar {
    swaybar_command waybar
}

### Commands ###

exec_always --no-startup-id "rm -f /tmp/swaymgr.sock && swaymgr && swaymgr -s 'set left'"

exec ulauncher --hide-window
exec nm-applet --indicator --no-agent
exec blueman-applet
exec dropbox

exec swayidle -w timeout 300 'swaymsg "output * dpms off"' \
                      resume 'swaymsg "output * dpms on"' \
                 timeout 305 "swaylock -f -c 000000" \
                        lock "swaylock -f -c 000000" \
                before-sleep "swaylock -f" \
                after-resume 'swaymsg "output * dpms on"'
