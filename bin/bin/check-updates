#!/usr/bin/env bash
# coding: utf-8

# Check for system package updates and create notification popup if available.

sudo aptitude update > /dev/null

USER='zoresvit'
UPDATES=$(aptitude -F%p --disable-columns search ~U | wc -l)

if [ "$UPDATES" -ne '0' ]; then
    export DISPLAY=:0.0 && \
        export XAUTHORITY=/home/${USER}/.Xauthority \
        && sudo -u ${USER} /usr/bin/notify-send \
        "System update" "$UPDATES updates available"
fi

exit "${UPDATES}"
